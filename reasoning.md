# Ход размышлений

1. А надо ли выносить марку самосвала в отдельную таблицу?
   Марка самосвала содержит инфу о грузоподъёмности. На каждый кастомный самосвал нужно будет создавать новую запись + каждый раз join.
   Да, это против правил, но стоит оценить выигрыш в производительности.

2. Руда - смешиваемый груз: привезя на склад груз руды, нельзя потом взять точно этот же груз и увезти его куда-либо ещё.
   Нужно ли как-то ещё использовать факт перевозки руды отдельным самосвалом? Факт разгрузки? Самосвал может разгрузиться не в зоне склада.
   Фактически это уровень метрики, поэтому стоит складывать такие данные отдельно, в колоночную БД, например. Это лучше, чем просто логировать.
   Тут нам и статистика и метрики для проведения анализа.

3. Из пункта 2 вывод, целесообразность делать отдельную запись в БД о разгрузке и о перевозке груза - под сомнением.
   Достаточно хранить сведения о содержимом кузова самосвала в данный момент. При разгрузке очищать содержимое кузова строго после пополнения содержимого на складе.

4. Не забываем, что сервер может сгореть в любой строке кода.

5. Нам нужно отображать Объем до разгрузки и Объем после загрузки у склада. Нужно ли создать отдельную таблицу разгрузок?

6. Хранить дату и время изменения груза у самосвала, при изменении слать в clickhouse diff, а может и просто факт. Может ли быть догрузка руды? Либо частичная разгрузка?

7. Попробуем обойтись без отдельной записи о разгрузке.

8. Перевозимый груз может быть разный, поэтому лучше использовать JSONField. Аналогично содержимое склада.

9. Руда имеет ключевые компоненты, но они не 100%, задокументировать процесс расчет изменения качественных характеристик содержимого склада в процессе разгрузки.

10. Нет ли возможности уйти от float в качественных характеристиках руды? Храним долю элемента в руде в процентах, если проценты - целое число, храним без точки, как int, в противном случае так и храним как дробное, возможно удастся избежать операций с дробными числами в случае если доля - целочисленный процент.

11. Погрузку/разгрузку можно хранить с разными знаками. Несмотря на то, что руда добывается и она растет, если говорить локально о погрузке/разгрузке, в сумме всегда должен быть 0, если нет ни одного загруженного самосвала. Не ясно как можно было бы это использовать при анализе данных.

12. Такой подход дает 2 вещи:

- отрицательного значения быть не должно, иначе проблема!
- если все самосвалы без груза, то в сумме должен быть ноль, иначе проблема
- общая сумма - количество тонн руды, которые в дороге.

13. Может ли склад быть многоугольником? Необходимо профилировать использование python'a и С-библиотек для вычисления принадлежности точки полигону.

14. Геоданные склада быстрее и лучше хранить в postgis, а вхождение точки в полигон чекать через ORM Django.

15. Что лучше хранить общий тоннаж и соотношение элементов в нем или тоннаж элементов по отдельности? Хранить лучше данные в формате первоисточника максимально долго, дабы избежать возможных ошибок и неточностей при конвертации (не забываем про IEEE 754). Не ясно какие данные получаем от первоисточника, для простоты расчётов буду хранить содержание веществ в килограммах.

16. Стоит добавить поле `enabled: bool` для всех моделей, чтобы можно было отключать записи. Например, если склад не работает, или самосвал не работает и т. д.
